<div class="single-card">

  <p ng-show="spinner" ><span class="glyphicon glyphicon-refresh spinning"></span> Recupero la scheda...</p>

  <div ng-show="errors" class="alert alert-danger" role="alert">
    <p>
      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
      <span class="sr-only">Error:</span>
      Errore durante il recupero della scheda, riprova più tardi.
    </p>
  </div>

  <div ng-show="scheda" class="panel panel-default">
    <div class="panel-heading"><h3>{{scheda.nome|capitalize:all}} {{scheda.cognome|capitalize:all}}</h3></div>
    <div class="panel-body col-md-8">
      <img ng-src="http://politici.openpolis.it/politician/picture?content_id={{scheda.op_id}}" alt="{{scheda.nome|capitalize:all}} {{scheda.cognome|capitalize:all}}"/>
      <p><b>Data di nascita:</b> {{scheda.data_nascita | date:'dd-MM-yyyy'}}</p>
      <p><b>Residenza:</b> {{scheda.comune_residenza|capitalize:all}} ({{scheda.provincia_residenza|capitalize:team}})</p>
      <p><b>Stato civile:</b> {{scheda.stato_civile}}</p>
      <p><b>Incarico:</b> <a ng-href="#/istituzione/{{scheda.incarico}}">{{scheda.incarico}}</a></p>
      <p><b>Professione:</b> {{scheda.professione}}</p>
      <p><b>Gruppo:</b> <a ng-href="#/gruppo/{{scheda.gruppo.acronym}}">{{scheda.gruppo.acronym}} - {{scheda.gruppo.name}}</a></p>
    </div> <!-- panel-body -->
    <div class="panel-body col-md-4">
      <p>Seleziona anno dichiarazione:</p>
      <ul class="nav nav-pills nav-justified">
        <li ng-repeat="dichiarazione in schede" ng-class="{'active': scheda.anno_dichiarazione === dichiarazione.anno_dichiarazione}" ng-click="selectYear($index)" role="presentation"><a href="">{{dichiarazione.anno_dichiarazione}}</a></li>
      </ul>     
      <br>
      <p><b>Indice Completezza:</b> {{scheda.indice_completezza}}</p>
      <p><a href="" ng-click="scrollTo('modello-redditi')"><b>Totale reddito:</b></a> {{scheda.totale_730|currency:"€"}}</p>
      <p><a href="" ng-click="scrollTo('beni-immobili')"><b>Numero immobili:</b></a> {{scheda.beni_immobili.length}}</p>
      <p><a href="" ng-click="scrollTo('beni-mobili')"><b>Numero beni mobili:</b></a> {{scheda.beni_mobili.length}}</p>
      <p><b>Contributi elettorali:</b> {{scheda.totale_contributi_elettorali|currency:"€"}}</p>
      <p><b>Spese elettorali:</b> {{scheda.totale_spese_elettorali|currency:"€"}}</p>
      <p><b>Partecipazioni societarie:</b> {{scheda.partecipazioni_soc.length}}</p>
    </div> <!-- panel-body -->

    <div class="panel-heading" id="modello-redditi" style="clear:both">Voci reddito {{scheda.anno_dichiarazione}}</div>
    <table class="table">
      <thead>
        <tr>
          <th>Voce</th>
          <th>Dichiarante</th>
          <th>Coniuge</th>
          <th>Totali</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="voce in scheda.reddito_730">
          <td ng-repeat="(k, v) in voce">
            {{v|currency:"€"}}
          </td>
        </tr>
        <tr>
          <td>Totale dichiarato</td>
          <td></td>
          <td></td>
          <td>{{scheda.totale_730|currency:"€"}}</td>
        </tr>
      </tbody>
    </table> <!-- reddito -->
    <div class="panel-heading" id="beni-immobili">Beni immobili {{scheda.anno_dichiarazione}}: {{scheda.beni_immobili.length}}</div>
    <table class="table">
      <thead>
        <tr>
          <th>Persona</th>
          <th>Diritto</th>
          <th>Descrizione</th>
          <th>Provincia</th>
          <th>Comune</th>
          <th>Rendita</th>
          <th>Categoria</th>
          <th>Annotazioni</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="voce in scheda.beni_immobili">
          <td ng-repeat="(k, v) in voce">
            {{v}}
          </td>
        </tr>
      </tbody>
    <table> <!-- immobili -->
    <div class="panel-heading" id="beni-mobili">Beni mobili {{scheda.anno_dichiarazione}}: {{scheda.beni_mobili.length}}</div>
    <table class="table">
      <thead>
        <tr>
          <th>Persona</th>
          <th>Tipologia</th>
          <th>Cavalli fiscali</th>
          <th>Anno immatr.</th>
          <th>Annotazioni</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="voce in scheda.beni_mobili">
          <td ng-repeat="(k, v) in voce">
            {{v}}
          </td>
        </tr>
      </tbody>
    </table> <!-- mobili -->
    <div class="panel-footer">
      <a href="{{scheda.filename_url}}"><p>Scarica documento originale<p></a>
      <!-- <li ng-repeat="(key, value) in scheda">{{key}}: {{value}}</li> -->
    </div> <!-- panel-footer -->
  </div> <!-- panel-default -->
</div>
